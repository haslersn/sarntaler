/*
 * Example implementation of
 * the example contract of
 * issue #23.
 */
contract {
    address owner;
    int followers;
    sarn balance;
}

int join(sarn x) { //changed return value from void to int
    if(x > 1) {
        transfer(owner,1);
        followers = followers + 1; // ++ is always expanded in MARM!
        if(power_of_two(followers) == 1) {
            transfer(msg,balance / 2);
        }
    }
    return 0;
}

/*
 * Another procedure in this file, changed return value from boolean to int ...
 */
int power_of_two(int x) {
    if (x > 0) {
        while (x % 2 == 0) {
            x = x / 2;
        }
        if (x == 1) {
            return 1;
        }
    }
    return 0;
}